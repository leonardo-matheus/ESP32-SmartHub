<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 IPTV Server - Documenta√ß√£o | ESP32-SmartHub</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì∫</text></svg>">
    <style>
        :root {
            --primary: #8b5cf6;
            --primary-dark: #7c3aed;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --card-bg: #ffffff;
            --border: #e2e8f0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--light);
            color: var(--dark);
            line-height: 1.7;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }
        
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 60px 20px;
        }
        header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        header p { opacity: 0.9; font-size: 1.1rem; }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: white;
            text-decoration: none;
            margin-bottom: 20px;
            opacity: 0.8;
        }
        .back-link:hover { opacity: 1; }

        main { padding: 40px 0; }
        
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        h2 { color: var(--dark); margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--primary); }
        h3 { color: var(--dark); margin: 20px 0 10px; }
        
        .code-block {
            background: var(--dark);
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 15px 0;
        }
        .code-block .comment { color: #64748b; }
        .code-block .tag { color: #f472b6; }
        .code-block .attr { color: #fbbf24; }
        .code-block .value { color: #a5f3fc; }
        
        code {
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th { background: var(--light); font-weight: 600; }
        
        ul, ol { margin-left: 20px; margin-bottom: 15px; }
        li { margin-bottom: 8px; }
        
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .info {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        .success {
            background: #dcfce7;
            border-left: 4px solid #22c55e;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }
        
        footer {
            background: var(--dark);
            color: white;
            padding: 30px;
            text-align: center;
        }
        footer a { color: var(--primary); }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <a href="index.html" class="back-link">‚Üê Voltar para Home</a>
            <h1>üì∫ ESP32 IPTV Server</h1>
            <p>Servidor de playlists M3U8 para dispositivos IPTV</p>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="card">
                <h2>üìã Vis√£o Geral</h2>
                <p>O ESP32 IPTV Server transforma seu ESP32 em um servidor de playlists IPTV, permitindo gerenciar e servir listas M3U8 para dispositivos como Smart TVs, set-top boxes e aplicativos de IPTV.</p>
                
                <h3>Funcionalidades</h3>
                <ul>
                    <li>Servidor HTTP para playlists M3U8</li>
                    <li>Parser de playlists com suporte a metadados</li>
                    <li>Interface web para gerenciamento</li>
                    <li>Armazenamento em mem√≥ria flash (SPIFFS)</li>
                    <li>Suporte a m√∫ltiplas playlists</li>
                </ul>
            </div>

            <div class="card">
                <h2>üìÅ Estrutura do Projeto</h2>
                <div class="code-block">
ESP32_IPTV_Server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp              <span class="comment"># Ponto de entrada</span>
‚îÇ   ‚îú‚îÄ‚îÄ config.h              <span class="comment"># Configura√ß√µes</span>
‚îÇ   ‚îú‚îÄ‚îÄ playlist_parser.cpp   <span class="comment"># Parser M3U8</span>
‚îÇ   ‚îú‚îÄ‚îÄ playlist_parser.h
‚îÇ   ‚îú‚îÄ‚îÄ storage_manager.cpp   <span class="comment"># Gerenciador SPIFFS</span>
‚îÇ   ‚îú‚îÄ‚îÄ storage_manager.h
‚îÇ   ‚îú‚îÄ‚îÄ web_server.cpp        <span class="comment"># Servidor HTTP</span>
‚îÇ   ‚îú‚îÄ‚îÄ web_server.h
‚îÇ   ‚îú‚îÄ‚îÄ wifi_manager.cpp      <span class="comment"># Gerenciador WiFi</span>
‚îÇ   ‚îî‚îÄ‚îÄ wifi_manager.h
‚îî‚îÄ‚îÄ platformio.ini            <span class="comment"># Configura√ß√£o PlatformIO</span>
                </div>
            </div>

            <div class="card">
                <h2>üìÑ Formato M3U8</h2>
                <p>O servidor suporta playlists no formato M3U8 Extended:</p>
                
                <div class="code-block">
<span class="tag">#EXTM3U</span>
<span class="tag">#EXTINF:</span><span class="value">-1</span> <span class="attr">tvg-id</span>=<span class="value">"globo"</span> <span class="attr">tvg-name</span>=<span class="value">"Globo HD"</span> <span class="attr">tvg-logo</span>=<span class="value">"http://..."</span> <span class="attr">group-title</span>=<span class="value">"Abertos"</span>,Globo HD
http://servidor.com/stream/globo

<span class="tag">#EXTINF:</span><span class="value">-1</span> <span class="attr">tvg-id</span>=<span class="value">"sbt"</span> <span class="attr">tvg-name</span>=<span class="value">"SBT HD"</span> <span class="attr">group-title</span>=<span class="value">"Abertos"</span>,SBT HD
http://servidor.com/stream/sbt
                </div>
                
                <h3>Atributos Suportados</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Atributo</th>
                            <th>Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>tvg-id</code></td>
                            <td>Identificador √∫nico do canal</td>
                        </tr>
                        <tr>
                            <td><code>tvg-name</code></td>
                            <td>Nome de exibi√ß√£o do canal</td>
                        </tr>
                        <tr>
                            <td><code>tvg-logo</code></td>
                            <td>URL do logo do canal</td>
                        </tr>
                        <tr>
                            <td><code>group-title</code></td>
                            <td>Categoria/grupo do canal</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h2>üöÄ Instala√ß√£o</h2>
                
                <h3>1. Configurar WiFi</h3>
                <p>Edite <code>src/config.h</code>:</p>
                <div class="code-block">
<span class="comment">// Rede WiFi</span>
#define WIFI_SSID "SuaRede"
#define WIFI_PASSWORD "SuaSenha"
                </div>

                <h3>2. Compilar e Upload</h3>
                <div class="code-block">
<span class="comment"># Compilar</span>
pio run -d ESP32_IPTV_Server

<span class="comment"># Upload firmware</span>
pio run -d ESP32_IPTV_Server --target upload

<span class="comment"># Upload filesystem (playlists)</span>
pio run -d ESP32_IPTV_Server --target uploadfs
                </div>
            </div>

            <div class="card">
                <h2>üåê API Endpoints</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>M√©todo</th>
                            <th>Endpoint</th>
                            <th>Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/</code></td>
                            <td>Interface web principal</td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/playlist.m3u8</code></td>
                            <td>Baixar playlist completa</td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/api/channels</code></td>
                            <td>Lista de canais em JSON</td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/api/groups</code></td>
                            <td>Lista de categorias</td>
                        </tr>
                        <tr>
                            <td><code>POST</code></td>
                            <td><code>/api/upload</code></td>
                            <td>Upload de nova playlist</td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/api/status</code></td>
                            <td>Status do servidor</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h2>üì± Uso com Players IPTV</h2>
                
                <h3>VLC Media Player</h3>
                <div class="code-block">
<span class="comment"># Abrir stream via linha de comando</span>
vlc http://192.168.1.100/playlist.m3u8

<span class="comment"># Ou via menu: Media > Open Network Stream</span>
                </div>

                <h3>Smart TV / Set-top Box</h3>
                <ol>
                    <li>Instale um app IPTV (ex: IPTV Smarters, TiviMate)</li>
                    <li>Adicione playlist via URL: <code>http://IP_DO_ESP32/playlist.m3u8</code></li>
                    <li>Aguarde a sincroniza√ß√£o</li>
                </ol>

                <div class="info">
                    <strong>Dica:</strong> Descubra o IP do ESP32 no Serial Monitor ap√≥s a conex√£o WiFi.
                </div>
            </div>

            <div class="card">
                <h2>üíæ Gerenciamento de Storage</h2>
                
                <h3>SPIFFS</h3>
                <p>O ESP32 usa SPIFFS (SPI Flash File System) para armazenar playlists. Capacidade t√≠pica: 1-3 MB dependendo da parti√ß√£o.</p>
                
                <div class="code-block">
<span class="comment"># Estrutura de arquivos no SPIFFS</span>
/
‚îú‚îÄ‚îÄ playlist.m3u8      <span class="comment"># Playlist principal</span>
‚îú‚îÄ‚îÄ channels.json      <span class="comment"># Cache de canais</span>
‚îî‚îÄ‚îÄ config.json        <span class="comment"># Configura√ß√µes</span>
                </div>

                <h3>Limites</h3>
                <table>
                    <tbody>
                        <tr>
                            <td><strong>Tamanho m√°ximo playlist</strong></td>
                            <td>~500KB</td>
                        </tr>
                        <tr>
                            <td><strong>M√°ximo de canais</strong></td>
                            <td>~1000 (depende da mem√≥ria)</td>
                        </tr>
                        <tr>
                            <td><strong>Formato suportado</strong></td>
                            <td>M3U, M3U8 (UTF-8)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h2>üîß M√≥dulos do Projeto</h2>
                
                <h3>playlist_parser</h3>
                <p>Respons√°vel por fazer o parsing de arquivos M3U8:</p>
                <ul>
                    <li>Extrai metadados (#EXTINF)</li>
                    <li>Agrupa canais por categoria</li>
                    <li>Valida URLs de stream</li>
                </ul>

                <h3>storage_manager</h3>
                <p>Gerencia o sistema de arquivos SPIFFS:</p>
                <ul>
                    <li>Inicializa√ß√£o e formata√ß√£o</li>
                    <li>Leitura/escrita de arquivos</li>
                    <li>Monitoramento de espa√ßo</li>
                </ul>

                <h3>web_server</h3>
                <p>Servidor HTTP com rotas REST:</p>
                <ul>
                    <li>Serve playlists para clientes</li>
                    <li>API JSON para gerenciamento</li>
                    <li>Interface web responsiva</li>
                </ul>

                <h3>wifi_manager</h3>
                <p>Gerencia conectividade WiFi:</p>
                <ul>
                    <li>Conex√£o autom√°tica</li>
                    <li>Reconex√£o em caso de falha</li>
                    <li>Modo AP para configura√ß√£o inicial</li>
                </ul>
            </div>

            <div class="card">
                <h2>‚ö†Ô∏è Considera√ß√µes</h2>
                
                <div class="warning">
                    <strong>Uso de Mem√≥ria:</strong> Playlists muito grandes podem exceder a mem√≥ria RAM do ESP32. Considere dividir em m√∫ltiplos arquivos ou usar pagina√ß√£o.
                </div>
                
                <div class="warning">
                    <strong>Streaming:</strong> O ESP32 N√ÉO faz proxy dos streams de v√≠deo - apenas serve a playlist. Os dispositivos clientes conectam diretamente aos servidores de stream.
                </div>
                
                <div class="success">
                    <strong>Vantagem:</strong> Por n√£o intermediar o v√≠deo, o ESP32 pode servir dezenas de clientes simultaneamente sem impacto na qualidade.
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>
            <a href="https://github.com/leonardo-matheus/ESP32-SmartHub">ESP32-SmartHub</a> ‚Ä¢
            <a href="esp32_nat_router.html">ESP32 NAT Router</a> ‚Ä¢
            <a href="esp32_wifi_gateway.html">ESP32 WiFi Gateway</a>
        </p>
    </footer>
</body>
</html>
